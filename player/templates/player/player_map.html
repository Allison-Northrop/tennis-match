<!DOCTYPE html>
{% extends 'player/base.html' %}

<html>
{% block content %}
<head>
<style>
#map {
  height: 590px;
  width: 100%;
}
</style>
</head>
<body>
  <div>

  </div>
  <!-- loop through and convert to latitutde and longitude for all addresses. then when the list is made, loop through it   -->
  <div id="map"></div>


<script>



    Array.prototype.forEach.call(player_list, function(markerElem) {
      var id = markerElem['id'];
      console.log('id is ' + id);
      var username = markerElem['username'];
      var skill_level = markerElem['skill_level'];
      var address = markerElem['address'];
      var availability_days = markerElem['availability_days'];
      var availability_times = markerElem['availability_times'];
      var looking_for = markerElem['looking_for'];
      var phone_number = markerElem['phone_number'];
      var email = markerElem['email'];
      var additional_info = markerElem['additional_info'];
      var point = new google.maps.LatLng(
        parseFloat(markerElem['latitude']),
        parseFloat(markerElem['longitude']));


      var infowincontent = document.createElement('div');
      var strong = document.createElement('strong');
      strong.textContent = name
      infowincontent.appendChild(strong);
      infowincontent.appendChild(document.createElement('br'));



      var text = document.createElement('text');
      text.textContent = "Username: "+ username + " | " + "Skill level: " + skill_level + " | " + "Availability: " + availability_days + "@" + availability_times + " | " + "Looking for: "+ looking_for +  " | " + "Contact info: " + email + "(email)" + " " + phone_number + "(phone)" + " | " + "Notes:" + additional_info

      infowincontent.appendChild(text);
      console.log(text)

      console.log(['point']) //coverting into float

        //keep track of this marker
      var marker = new google.maps.Marker({
        position: point,
        map: map

      });
    };

      console.log(marker)
      marker.addListener('click', function() {
        console.log("clicked the marker")
        infoWindow.setContent(infowincontent);
        infoWindow.open(map, marker);
      });
    });





    </script>

    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key={{GOOGLE_API_KEY}}&callback=initMap">
    </script>
  </body>
  {% endblock %}
  </html>
